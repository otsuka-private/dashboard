(()=>{"use strict";function e(e,t,o,a){let n=0,r=0;return t<=a?n=a-t:(n=a+60-t,r--),r+=e<=o?o-e:o+24-e,console.log(),[r,n]}function t(e,t,o){let a=+localStorage.getItem(`category${o}Minute`)+t,n=+localStorage.getItem(`category${o}Hour`)+e+(a-a%60)/60;return localStorage.setItem(`category${o}Hour`,n),a%=60,localStorage.setItem(`category${o}Minute`,a),[n,a]}class o{constructor(e){this.calcTime(e)}calcTime(t){const o=localStorage.getItem("recordNumber");let a=+o-1;if(!0===t){a=o;const t=localStorage.getItem(`hour${a}`),n=localStorage.getItem(`minute${a}`),r=localStorage.getItem("endHour"),l=localStorage.getItem("endMinute"),c=e(+t,+n,+r,+l),g=localStorage.getItem(`thing${a}`);this.print(c[0],c[1],g)}else if(0===a){a++;const t=+localStorage.getItem("startHour"),o=+localStorage.getItem("startMinute"),n=localStorage.getItem(`hour${a}`),r=localStorage.getItem(`minute${a}`),l=e(+t,+o,+n,+r),c="休憩";this.print(l[0],l[1],c)}else{const t=localStorage.getItem(`hour${a}`),o=localStorage.getItem(`minute${a}`);let n=a,r=++n;const l=localStorage.getItem(`hour${r}`),c=localStorage.getItem(`minute${r}`),g=e(+t,+o,+l,+c),d=localStorage.getItem(`thing${a}`);this.print(g[0],g[1],d)}}print(e,o,a){const n=document.getElementById("category-p-todai"),r=document.getElementById("category-p-js"),l=document.getElementById("category-p-website"),c=document.getElementById("category-p-reading"),g=document.getElementById("category-p-rest");switch(a){case"東大":{const a=t(e,o,"Todai");n.textContent=a[0]+" : "+("0"+ +a[1]).slice(-2);break}case"プログラミング":{const a=t(e,o,"Js");r.textContent=a[0]+" : "+("0"+ +a[1]).slice(-2);break}case"ポケヨビ":{const a=t(e,o,"Website");l.textContent=a[0]+" : "+("0"+ +a[1]).slice(-2);break}case"読書":{const a=t(e,o,"Reading");c.textContent=a[0]+" : "+("0"+ +a[1]).slice(-2);break}case"休憩":{const a=t(e,o,"Rest");g.textContent=a[0]+" : "+("0"+ +a[1]).slice(-2);break}default:alert("Computer calculated how long you worked on each category, but it seems like you did not work a single minute today.")}}}class a{constructor(){this.showNewWeekBtn(),this.startTime=0,this.endTime=0,this.addStartEnd(),this.setNewWeek(),this.deleteDayStartEnd()}showNewWeekBtn(){1===(new Date).getDay()?document.getElementById("modal-set-new-week-btn").style.display="inline-block":document.getElementById("modal-set-new-week-btn").style.display="none"}addStartEnd(){const e=document.getElementById("radio-start"),t=document.getElementById("radio-end");document.getElementById("decide-day-start-end-button").addEventListener("click",(()=>{if(e.checked){const e=new Date,t=e.getMinutes(),o=e.getHours(),a=e.getDay();localStorage.setItem("startHour",o),localStorage.setItem("startMinute",t),localStorage.setItem("dayToday",a),document.getElementById("wake-time").textContent=o+" : "+("0"+t).slice(-2)}else if(t.checked){const e=new Date,t=e.getMinutes(),a=e.getHours();localStorage.setItem("endHour",a),localStorage.setItem("endMinute",t),document.getElementById("end-time").textContent=a+" : "+("0"+t).slice(-2),this.calcPrintWakingTime(),new o(!0),this.calcPrintWorkingTime()}}))}calcPrintWakingTime(){const t=localStorage.getItem("startMinute"),o=localStorage.getItem("endMinute"),a=e(+localStorage.getItem("startHour"),+t,+localStorage.getItem("endHour"),+o),n=+a[0]+ +a[1]/60;localStorage.setItem("wakingHour",a[0]),localStorage.setItem("wakingMinute",a[1]),localStorage.setItem(`wakingTime${localStorage.getItem("dayToday")}`,n),document.getElementById("waking-time").textContent=a[0]+"h "+a[1]+"m"}calcPrintWorkingTime(){const e=+localStorage.getItem("categoryTodaiMinute")+ +localStorage.getItem("categoryJsMinute")+ +localStorage.getItem("categoryWebsiteMinute")+ +localStorage.getItem("categoryReadingMinute"),t=e%60,o=(e-t)/60+ +localStorage.getItem("categoryTodaiHour")+ +localStorage.getItem("categoryJsHour")+ +localStorage.getItem("categoryWebsiteHour")+ +localStorage.getItem("categoryReadingHour");localStorage.setItem("workingHour",o),localStorage.setItem("workingMinute",t);const a=o+t/60;localStorage.setItem(`workingTime${localStorage.getItem("dayToday")}`,a),document.getElementById("working-time").textContent=o+"h "+t+"m"}setNewWeek(){document.getElementById("decide-set-new-week-button").addEventListener("click",(()=>{for(let e=0;e<=6;e++)localStorage.setItem(`workingTime${e}LastWeek`,localStorage.getItem(`workingTime${e}`)),localStorage.setItem(`wakingTime${e}LastWeek`,localStorage.getItem(`wakingTime${e}`)),localStorage.setItem(`workingTime${e}`,null),localStorage.setItem(`wakingTime${e}`,null)}))}deleteDayStartEnd(){document.getElementById("delete-day-start-end-button").addEventListener("click",(()=>{document.getElementById("wake-time").textContent="--",document.getElementById("end-time").textContent="--",document.getElementById("waking-time").textContent="--",document.getElementById("working-time").textContent="--",localStorage.removeItem("startHour"),localStorage.removeItem("startMinute"),localStorage.removeItem("endHour"),localStorage.removeItem("endMinute"),localStorage.removeItem("wakingHour"),localStorage.removeItem("wakingMinute"),localStorage.removeItem("workingHour"),localStorage.removeItem("workingMinute")}))}}class n{constructor(){this.addEventListnerToCardContent(),this.setNewContent()}addEventListnerToCardContent(){const e=document.querySelectorAll(".category-goal");for(const t of e)t.addEventListener("click",(e=>{localStorage.setItem("currentSelectedCategoryGoal",`${e.target.id}`),document.querySelector("#modal-category-goal-set-new input").value=e.target.textContent,document.querySelector("#modal-category-goal-set-new input").style.color="rgba(0, 0, 0, 0.5)",document.querySelector("#modal-category-goal-set-new input").addEventListener("click",(()=>{document.querySelector("#modal-category-goal-set-new input").style.color="rgba(0, 0, 0, 1)"}))}))}setNewContent(){document.getElementById("decide-category-goal-btn").addEventListener("click",(()=>{const e=document.querySelector("#modal-category-goal-set-new input").value;if(e){const t=localStorage.getItem("currentSelectedCategoryGoal");localStorage.setItem(`${t}`,e)}}))}}class r{constructor(){this.fetchDayStartEndLocalStorage(),this.fetchDayRecordLocalStorage(),this.fetchCategoryTimeLocalStorage(),this.fetchTodaiCardContentLocalStorage(),this.fetchCategoryGoalLocalStorage(),this.fetchProgrammingCardLocalStorage(),this.fetchReadingCardLocalStorage()}fetchDayStartEndLocalStorage(){const e=localStorage.getItem("startHour"),t=localStorage.getItem("startMinute");if(!e)return;document.getElementById("wake-time").textContent=e+" : "+t;const o=localStorage.getItem("endHour"),a=localStorage.getItem("endMinute");if(o){document.getElementById("end-time").textContent=o+" : "+a;const e=localStorage.getItem("wakingHour"),t=localStorage.getItem("wakingMinute");document.getElementById("waking-time").textContent=e+"h "+t+"m"}const n=localStorage.getItem("workingHour"),r=localStorage.getItem("workingMinute");document.getElementById("working-time").textContent=n+"h "+r+"m"}fetchDayRecordLocalStorage(){const e=document.getElementById("card-content-day-record"),t=localStorage.getItem("recordNumber");for(let o=1;o<=t;o++){const t=document.getElementById("template-record-p").content.cloneNode(!0);t.querySelector("p").textContent=localStorage.getItem(`hour${o}`)+" : "+("0"+ +localStorage.getItem(`minute${o}`)).slice(-2)+"　"+localStorage.getItem(`thing${o}`),e.append(t)}}fetchCategoryTimeLocalStorage(){const e=document.getElementById("category-p-todai"),t=document.getElementById("category-p-js"),o=document.getElementById("category-p-website"),a=document.getElementById("category-p-reading"),n=document.getElementById("category-p-rest");e.textContent=+localStorage.getItem("categoryTodaiHour")+" : "+("0"+ +localStorage.getItem("categoryTodaiMinute")).slice(-2),t.textContent=+localStorage.getItem("categoryJsHour")+" : "+("0"+ +localStorage.getItem("categoryJsMinute")).slice(-2),o.textContent=+localStorage.getItem("categoryWebsiteHour")+" : "+("0"+ +localStorage.getItem("categoryWebsiteMinute")).slice(-2),a.textContent=+localStorage.getItem("categoryReadingHour")+" : "+("0"+ +localStorage.getItem("categoryReadingMinute")).slice(-2),n.textContent=+localStorage.getItem("categoryRestHour")+" : "+("0"+ +localStorage.getItem("categoryRestMinute")).slice(-2)}fetchTodaiCardContentLocalStorage(){const e=document.querySelectorAll("#todai .card .card a");for(const t of e)localStorage.getItem(`${t.id}`)&&(t.textContent=localStorage.getItem(`${t.id}`))}fetchCategoryGoalLocalStorage(){const e=document.querySelectorAll(".category-goal");for(const t of e)localStorage.getItem(`${t.id}`)&&(t.textContent=localStorage.getItem(`${t.id}`))}fetchProgrammingCardLocalStorage(){localStorage.getItem("programmingAll")&&(document.getElementById("programming-all").textContent=+localStorage.getItem("programmingAll")),localStorage.getItem("programmingNow")&&"null"!=localStorage.getItem("programmingNow")&&(document.getElementById("programming-progress-now").textContent=localStorage.getItem("programmingNow"))}fetchReadingCardLocalStorage(){localStorage.getItem("pageAll")&&(document.getElementById("page-all").textContent=+localStorage.getItem("pageAll")),localStorage.getItem("pageRead")&&"null"!=localStorage.getItem("pageRead")&&(document.getElementById("page-read").textContent=localStorage.getItem("pageRead")),localStorage.getItem("bookTitle")&&(document.getElementById("book-now-reading").textContent=localStorage.getItem("bookTitle"))}}class l{constructor(){this.recordNumber,this.addDayRecord(),this.deleteDayRecord()}addDayRecord(){const e=document.getElementById("card-content-day-record");document.getElementById("decide-day-record").addEventListener("click",(()=>{const t=new Date,a=t.getHours(),n=t.getMinutes(),r=document.getElementsByName("day-record-thing");for(let t of r)if(t.checked){const o=document.getElementById("template-record-p").content.cloneNode(!0);o.querySelector("p").textContent=a+" : "+("0"+n).slice(-2)+"　"+t.value,this.recordNumber=localStorage.getItem("recordNumber"),this.recordNumber++,localStorage.setItem(`hour${this.recordNumber}`,a),localStorage.setItem(`minute${this.recordNumber}`,n),localStorage.setItem(`thing${this.recordNumber}`,t.value),localStorage.setItem("recordNumber",this.recordNumber),e.append(o)}new o(!1),this.calcPrintWorkingTime()}))}calcPrintWorkingTime(){const e=+localStorage.getItem("categoryTodaiMinute")+ +localStorage.getItem("categoryJsMinute")+ +localStorage.getItem("categoryWebsiteMinute")+ +localStorage.getItem("categoryReadingMinute"),t=e%60,o=(e-t)/60+ +localStorage.getItem("categoryTodaiHour")+ +localStorage.getItem("categoryJsHour")+ +localStorage.getItem("categoryWebsiteHour")+ +localStorage.getItem("categoryReadingHour");localStorage.setItem("workingHour",o),localStorage.setItem("workingMinute",t);const a=o+t/60;localStorage.setItem(`workingTime${localStorage.getItem("dayToday")}`,a),document.getElementById("working-time").textContent=o+"h "+t+"m"}deleteDayRecord(){document.getElementById("delete-day-record-button").addEventListener("click",(()=>{document.getElementById("card-content-day-record").innerHTML='\n      <span class="card-title">Day Record</span>\n      <template id="template-record-p">\n        <div class="row">\n          <p class="col s12"></p>\n        </div>\n      </template>\n        ';const e=localStorage.getItem("recordNumber");for(let t=1;t<=e;t++)localStorage.removeItem(`hour${t}`),localStorage.removeItem(`minute${t}`),localStorage.removeItem(`thing${t}`);localStorage.removeItem("recordNumber"),localStorage.removeItem("categoryTodaiHour"),localStorage.removeItem("categoryTodaiMinute"),localStorage.removeItem("categoryJsHour"),localStorage.removeItem("categoryJsMinute"),localStorage.removeItem("categoryWebsiteHour"),localStorage.removeItem("categoryWebsiteMinute"),localStorage.removeItem("categoryReadingHour"),localStorage.removeItem("categoryReadingMinute"),localStorage.removeItem("categoryRestHour"),localStorage.removeItem("categoryRestMinute"),(new r).fetchCategoryTimeLocalStorage(),this.recordNumber=0}))}}class c{constructor(){this.addEventListnerToCardContent(),this.setNewContent()}addEventListnerToCardContent(){const e=document.querySelectorAll("#todai .card .card a");for(const t of e)t.addEventListener("click",(e=>{localStorage.setItem("currentSelectedTodaiCardContentId",`${e.target.id}`),document.querySelector("#modal-todai-set-card-content input").value=e.target.textContent,document.querySelector("#modal-todai-set-card-content input").style.color="rgba(0, 0, 0, 0.5)",document.querySelector("#modal-todai-set-card-content input").addEventListener("click",(()=>{document.querySelector("#modal-todai-set-card-content input").style.color="rgba(0, 0, 0, 1)"}))}))}setNewContent(){document.getElementById("set-todai-card-content-btn").addEventListener("click",(()=>{const e=document.querySelector("#modal-todai-set-card-content input").value;if(e){const t=localStorage.getItem("currentSelectedTodaiCardContentId");localStorage.setItem(`${t}`,e)}}))}}class g{constructor(){this.addEventListenerToProgressBtn(),this.addEventListenerToAllBtn()}addEventListenerToProgressBtn(){document.getElementById("decide-programming-progress-btn").addEventListener("click",(()=>{const e=+document.querySelector("#modal-programming-progress-now input").value;e&&(localStorage.setItem("programmingNow",e),document.getElementById("programming-progress-now").textContent=e)}))}addEventListenerToAllBtn(){document.getElementById("decide-programming-all-btn").addEventListener("click",(()=>{const e=+document.querySelector("#modal-programming-all input").value;e&&(localStorage.setItem("programmingAll",e),document.getElementById("programming-all").textContent=e)}))}}class d{constructor(){this.addEventListenerToBookNowReading(),this.addEventListenerToProgressBtn(),this.addEventListenerToPageAllBtn()}addEventListenerToBookNowReading(){document.getElementById("modal-book-now-reading-btn").addEventListener("click",(()=>{const e=document.querySelector("#modal-book-now-reading input").value;localStorage.setItem("bookTitle",e),document.getElementById("book-now-reading").textContent=e}))}addEventListenerToProgressBtn(){document.getElementById("modal-reading-page-btn").addEventListener("click",(()=>{const e=+document.querySelector("#modal-reading-page-read input").value;e&&(localStorage.setItem("pageRead",e),document.getElementById("page-read").textContent=e)}))}addEventListenerToPageAllBtn(){document.getElementById("modal-reading-page-all-btn").addEventListener("click",(()=>{localStorage.setItem("pageAll",document.querySelector("#modal-reading-page-all input").value)}))}}new class{constructor(){new r,new a,new l,new n,new c,new g,new d,this.deleteAllBtn()}deleteAllBtn(){document.getElementById("modal-day-start-end-delete-yes").addEventListener("click",(()=>{localStorage.clear()}))}}})();